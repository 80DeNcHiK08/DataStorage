@model IEnumerable<DataStorage.BLL.DTOs.DocumentDTO>

@{
    Layout = "~/Views/Document/_Layout.cshtml";
    ViewData["Title"] = "Storage";
}
<div class="leftbar">
    <button class="menu-button" id="create_menu">Create</button>
    <form class="menu-item create-item" id="uploadFile" asp-action="CreateFile" asp-controller="Document" method="post" onchange="submit()" enctype="multipart/form-data">
        <input type="file" name="uploadedFile" class="inputfile" id="uploadedFile" data-multiple-caption="{count} files selected" multiple />
        <label for="uploadedFile"><span>Choose a file&hellip;</span></label>
        <input name="parentId" type="hidden" value="@ViewData["parentId"]">
    </form>
    <form class="menu-item create-item crfolder" asp-action="CreateFolder" asp-controller="Document" method="post">
        <input type="text" name="FolderName" class="" id="FolderName" placeholder="Folder Name"/>
        <input name="parentId" type="hidden" value="@ViewData["parentId"]">
        <input type="submit" class="submit" value="Create Folder">
    </form>
    <hr>
    <button class="menu-button" id="settings_menu">Settings</button>
        <a class="menu-item settings-item">Delete All<input type="hidden"></a>
        <a class="menu-item settings-item" asp-action="Profile" asp-controller="Home">Profile Settings<input type="hidden"></a>
    <hr>
    <button class="menu-button" id="tree">All Files:</button>
    <div class="filetree">
        @foreach (var file in Model) 
        {
            @file.Name<br>
        }
    </div>
</div>
<form class="dropzone needsclick dz-clickable" id="uploader" method="post" asp-action="CreateFile" asp-controller="Document" enctype="multipart/form-data">
    <div class="fallback">
        <input name="parentId" type="hidden" value="@ViewData["parentId"]">
        <input name="uploadedFile" type="file" multiple />
        <input type="submit" value="Upload" />
  </div>
    <div id="filebasket">
        <input type="hidden" value="@ViewData["ownerId"]">
            @foreach (var file in Model) 
            {
                //@if(file.OwnerId.ToString() == ViewData["ownerId"].ToString()) 
                //{
                    <div class="block fileblock" title="@file.Name">
                        <div class="brow">
                            <input type="hidden" value='@file.DocumentId' id="hiddenblockid" name="parentId">
                            <input type="hidden" value='@file.IsFile.ToString()' id="hiddenblockfiletype">
                            @if (file.IsFile == true)
                            {
                                <text><div class="fimg"></div></text>
                            }
                            else
                            {
                                <text><div class="fdimg"></div></text>
                            }
                        </div>
                        <div class="brow">
                            <h3 class="caption">@file.Name</h3>
                            <div class="cntr-btns">
                                <i class="fas fa-angle-up" id="moreoptions"></i>
                            </div>
                        </div>
                        <div class="eventhandler"></div>
                        <div class="contextmenu">
                            <div class="items-handler">
                                <a class="func delete">Delete</a>
                                <a class="func info">Details</a>
                                <a class="func delete">Share</a>
                                <a class="func download">Download</a>
                            </div>
                        </div>
                    </div>
                //}
            }
            <hr />
    </div>
    <div id="downloadprogress"></div>
</form>
